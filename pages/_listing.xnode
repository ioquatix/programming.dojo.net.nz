<?r 
if attributes['src']
	path = parent.node.local_path(Utopia::Path.create(attributes['src']))
	code = File.read(path)
else
	code = content
end

if lang = (attributes['lang'] || attributes['brush']) ?>
	<pre class="syntax brush-#{lang}">#{Strings::to_html code}</pre>
<?r else ?>
	<pre class="syntax">#{Strings::to_html code}</pre>
<?r end ?>
