/*
	The run from the command line:
		$ g++ -o sort sort.c
		$ ./sort
		
	Outputs:
		Name: Bob Age: 10
		Name: Sally Age: 13
		Name: John Age: 15
*/

#include <stdio.h>
#include <stdlib.h>

#define NUM_PEOPLE 3

struct Person {
	const char * name;
	int age;
};

int compareByAge (const void * p1, const void * p2) {
	return ((Person*)p1)->age - ((Person*)p2)->age;
}

int main (int argv, char ** argc) {
	Person* people = (Person*)malloc(sizeof(Person) * NUM_PEOPLE);
	
	people[0].name = "Bob";
	people[0].age = 10;
	
	people[1].name = "John";
	people[1].age = 15;
	
	people[2].name = "Sally";
	people[2].age = 13;
	
	qsort(people, NUM_PEOPLE, sizeof(Person), compareByAge);
	
	for (int i = 0; i < NUM_PEOPLE; i += 1) {
		printf("Name: %s Age: %d\r\n", people[i].name, people[i].age);
	}
	
	free(people);
}
